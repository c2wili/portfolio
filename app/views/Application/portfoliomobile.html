<!DOCTYPE html> 
<html>
<head>
	<title>Portfolio</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	#{stylesheet 'jquery.mobile-1.4.5.min.css' /}
	#{stylesheet 'font-awesome-4.6.3/css/font-awesome.css' /}
	#{stylesheet 'jquery.dataTables.css' /}
	
	#{script 'jquery-1.12.4.min.js' /}
	#{script 'jquery.mobile-1.4.5.min.js' /}
	#{script 'jquery.number.min.js' /}
	#{script 'DataTables-1.10.12/media/js/jquery.dataTables.min.js' /}
		
	#{script 'moment-2.15.1.min.js' /}
	
	#{script 'highcharts-6.1.0.js' /}
	#{script 'summaryCharts.js' /}
	
	
<style>
#all-accounts-pie{position:absolute; top:55px; left:255px; width:200px;}
#taxable-ytd-dividend-chart{position:absolute; top:196px; left:255px; width:200px;}
#retirement-ytd-dividend-chart{position:absolute; top:379px; left:255px; width:200px;}
.ui-content-stock{ background-color:#ffffff; margin:10px; padding:.2em; }
.ui-overlay-a, .ui-page-theme-a, .ui-page-theme-a .ui-panel-wrapper {
    background-color: #e9e9e9;
}    
.grp-hdr{font-size:17px; font-weight:bold;}
.grp-subhdr{font-size:12px;}
.grp-val{color:#0000ff; font-size:15px;}

table td{
font-family:sans-serif;
font-size:12px;
}
.holding-value-loss{
font-family:sans-serif;
font-size:12px;
 border-radius: 5px; 
 box-shadow: 0 0 5px rgba(1, 1, 1, 0.7);
 background-color: #FFFFFF;
 height:42px;
 width:80px;
 text-align:right;
 background-image: linear-gradient(-60deg, #FF0000 0%, #e0b1b1 100%);
 color:#ffffff;
 padding:4px;
}
.holding-value-gain{
font-family:sans-serif;
font-size:12px;
 border-radius: 5px; 
 box-shadow: 0 0 5px rgba(1, 1, 1, 0.7);
 background-color: #FFFFFF;
 height:42px;
 width:80px;
 text-align:right;
background-image: linear-gradient(-60deg, #00721c 0%, #a4c1ab 100%);
 color:#ffffff;
 padding:4px;
 
 
}


</style>


<script>

Highcharts.setOptions({
    colors: [ '#50B432', '#058DC7', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
 });
 
 
function Holding( _ticker ){
    this.ticker = _ticker;
    this.company = "";
    this.brokerage = 0;
    this.shares_owned = 0;
    this.current_price = 0;
    this.history = [];
    this.gain_loss = 0;
    this.cost_basis = 0;
    
    this.updateCostBasis = function (){
    	
		var so = 0;
		var cb = 0;
		
    	$.each( $this.history, function( index, histrec ) {
    		
    		if(histrec.activity_type == "buy" || histrec.activity_type == "drip"){    	
	    		if($this.cost_basis == 0){
	    			cb = histrec.price;
	    		}
	    		else{
	    			
	    			cb = ( ( so * cb ) + ( ( histrec.shares - histrec.shares_sold ) * histrec.price ) )
	    			      /
	    			     ( so + ( histrec.shares - histrec.shares_sold ) )
	    		}
	    		
    			so += histrec.shares;
    		}
    	});
    	
    	this.cost_basis = cb;    	
    }
    
    this.addToPosition = function( histrec ){
    	
    	histrec.shares_sold = 0;
     	
    	// add shares to overall shares owned
    	this.shares_owned+= histrec.shares;
    }
    
    this.sellPosition = function( histrec ){
     	
    	// if this sale is all shares, update values
		if(this.shares_owned.toFixed(4) == histrec.shares.toFixed(4) || histrec.shares > this.shares_owned ){
			this.shares_owned = 0;

		    $.each( this.history, function( index, hr ) {
		    	// update all history records shares_sold 
		    	if(hr.activity_type == "buy" || hr.activity_type == "drip"){
					hr.shares_sold = hr.shares
		    	}
		    });
		}
		else{
		    // subtract sold shares from position
		    this.shares_owned-= histrec.shares;
    				    
		    // update the shares_sold for history record using FIFO
		    var ss = histrec.shares;    		    
		    $.each( this.history, function( index, hr ) {
		    	
		    	if(hr.activity_type == "buy" || hr.activity_type == "drip"){
    		    	
		    		// all shares for this buy record have been sold, move on to the next one
		    		if(hr.shares_sold == hr.shares)  return true;
		    		
		    		// sold more shares so this entire buy record is covered
		    		if(ss >= ( hr.shares - hr.shares_sold ) ){
						hr.shares_sold = hr.shares;
						ss -= hr.shares;
					}    		    	
		    		else{
						hr.shares_sold = ss;    		    			
		    		}
		    	}
		    });		    
		}
    }
    
    this.addHistory = function( histrec ){
    	
    	this.history.push(histrec);
    	
    	var disp = (histrec.ticker == "OGE") ? true : false;

    	this.current_price = histrec.current_price || 0;
    	this.company = histrec.company_name;
    	this.brokerage = histrec.brokerage_id;
 
    	if(histrec.activity_type == "buy" || histrec.activity_type == "drip"){    		
    		this.addToPosition( histrec );
    		this.gain_loss+= histrec.gain_loss;
    	}
    	else if(histrec.activity_type == "dividend" || histrec.activity_type == "lt gain" || histrec.activity_type == "st gain"){
    		// add capital gains to overall gain loss.
    		this.gain_loss+=histrec.shares*histrec.price;
    	}
    	else if(histrec.activity_type == "sell"){    		
    		this.sellPosition( histrec );
    	}
    	
    	if(disp) console.log(this.toString())

    }
 
    
    this.getValue = function(){       
    	//console.log(this.toString());
    	
    	if(this.shares_owned === 0) return 0;
    	//console.log(this.ticker +" get value " + this.shares_owned + " : " + this.current_price + " : " + (this.shares_owned * this.current_price))
    	return this.shares_owned * this.current_price;
    }     
    
    this.getDividend = function( date_or_year ){
    	return this.getGain( date_or_year, true );
    }
    
    this.getGain = function( date_or_year, divonly ){ 
    	
    	var start_date = "";
    	var end_date = "";
    	
    	// get all dividends ever paid
    	if(date_or_year == null) {
    		start_date = "1900-01-01";
    		end_date = "2999-12-31";
    		date_or_year = "*";
    	}
    	
    	if(typeof date_or_year === 'object'){
    		date_or_year = date_or_year.format("YYYY-MM-DD");
    	}
    	
    	if(date_or_year.toString().length == 4){
    		start_date = date_or_year + "-01-01";
    		end_date = date_or_year + "-12-31";
    	}
    	
    	if(date_or_year.toString().length == 10){
    		start_date = moment(date_or_year).startOf('year').format("YYYY-MM-DD");
    		end_date = date_or_year;
    	}
    	
    	start_date = moment(start_date);
    	end_date = moment(end_date);
    	
    	var gain = 0;
    	var dividend = 0;
    	 
    	$.each( this.history, function( index, histrec ) {
    		
        	if(histrec.ticker == "OGE"){
        		console.log(histrec)
        	}
        	
    		if(histrec.activity_type == "dividend" || histrec.activity_type == "lt gain" || histrec.activity_type == "st gain"){    			 
    			if(moment(histrec.activity_date).isBetween( start_date, end_date )){
    				dividend+=Number(histrec.shares) * Number(histrec.price);
    			}
    		}
    		if(histrec.activity_type == "buy"){
    			if(moment(histrec.activity_date).isBetween( start_date, end_date )){
    				gain+=Number(histrec.gain_loss);
    			}
    		}
    	});
    	
    	//if(dividend > 0) console.log(this.ticker + " : " + dividend);

    	if(divonly) 
    		return dividend;
    	else 
    		return gain + dividend;
    }
    
    this.toString = function(){
    	return this.ticker + "\n" +
    	  this.company + "\n brokerage: " +
          this.brokerage + "\n shares_owned: " +
          this.shares_owned + "\n current_price: " +
          this.current_price + "\n gain_loss: " +
          this.gain_loss + "\n cost_basis: " +
          this.cost_basis + "\n" +
          this.history;
    }
}
 
function Portfolio( _id, _name ){
	this.id = _id;
	this.name = _name
	this.current_value= 0;
	this.realized_gain_loss=0;
	this.dividends=0;
	this.dividends_ytd=0;
	this.dividends_pytd=0;
	this.dividends_py=0;
	this.holdings = [];
	
    this.toString = function(){
		console.log("Portfolio: " + this.id + ", " + this.name)
    }
    
    this.getHolding = function( ticker ){
    	if(this.holdings[ticker] == null){
    		var h = new Holding( ticker );
    		this.holdings[ticker] = h;
    	}
    	
    	return this.holdings[ticker];
    }
    
    this.getDividend = function( date_or_year ){
    	return this.getGain( date_or_year, true );
    }
    
    this.getGain = function( date_or_year, divonly ){
    	if(divonly == null) divonly = false;
    	
    	var gain = 0;
    	for (var key in this.holdings) {
    		gain+= this.holdings[key].getGain( date_or_year, divonly );
    	}  	
    	return gain;
    	
    }    
    
    this.getValue = function(){
    	var value = 0;
    	for (var key in this.holdings) {
    		value+= this.holdings[key].getValue();
    	}  	
    	return value;
    }
} 

var portfolios = [];
portfolios[1] = new Portfolio(1, 'Taxable');
portfolios[2] = new Portfolio(2, 'Retirement');

var dt = moment().format("YYYY-MM-DD");
var yr = moment().year();

$( document ).ready(function() {	    	
	
	$.getJSON( "rest?hnd=newsummary", function( data ) {		 
	 
		// build each portfolio
	    $.each( data, function( index, histrec ) {
	    	var ticker = histrec.ticker;
	    	//console.log(histrec);
	    	try{
	    		var portfolio = portfolios[histrec.portfolio_id];
	    	
	    		// get holding 
	    		var holding = portfolio.getHolding( ticker );
	    		
	    		// add history record to holding object
	    		holding.addHistory( histrec )	    		
	    	}
	    	catch{
	    		//console.log("exception: error processing history record");
	    		//console.log(histrec)
	    	}
	    });
		
		
		
	    
		//console.log(portfolios[1].getValue());
		 
	    //console.log(portfolios[2].getValue());
	    //console.log(portfolios[1].getGain());
	    //console.log(portfolios[2].getGain());
	    //console.log("-----------------------");
	    //console.log(portfolios[1].getDividend());
	    //console.log(portfolios[2].getDividend());
	    //console.log(portfolios[2].getDividend('2018-04-01'));
   
	    //var o = portfolios[2].holdings['VWENX']
		//console.log("dividend all time: " + o.getDividend())
		//console.log("dividend current year: " + o.getDividend(2018))
		//console.log("dividend 2016: " + o.getDividend(2016))
		
		// populate the overview
		var totalValue = 0;
		var totalGain = 0;
		$.each( portfolios, function( index, p ) {
		    
			if(p == null ) return true; // aka... continue

		    $("#" + p.name.toLowerCase() + "-value").text('$' + $.number(p.getValue(),2))
            $("#" + p.name.toLowerCase() + "-total-dividends").text('Total Dividends: $' + $.number(p.getDividend(),2))
            
            var pct = (p.getDividend( yr )- p.getDividend( moment().subtract(1, 'years') )) / p.getDividend( yr ) * 100;			
		    $("#" + p.name.toLowerCase() + "-ytd-dividends").html('Total Dividends PY/YTD: $' + $.number(p.getDividend( moment().subtract(1, 'years') ),2) +" / $" + $.number(p.getDividend( yr ),2) + "  " + $.number(pct,2) + "%" );
		    
		    $("#" + p.name.toLowerCase() + "-realized-gain").text('Total Realized Gain: $' + $.number(p.getGain(),2))
		    
		    totalValue+=p.getValue();
		    totalGain+=p.getGain();
		});
		
	    
	    $("#total-value").text('$' + $.number(totalValue,2));
	    $("#total-realized-gain").text('Total Gains: $' + $.number(totalGain,2))	

	    buildSummaryCharts( portfolios );

	    //loadHistory( "VWENX" )
	});
	
}); //end on ready

function loadHistory( ticker ){
	console.log( ticker )

	var p = portfolios[2];
	var holding = p.getHolding(ticker);	
	
    if($.fn.dataTable.isDataTable("#history-table")){
   	 var tbl = $('#history-table').DataTable();
   	 $('#history-table').empty();
   	 tbl.destroy();
    }
    
	var content = [];
	$.each( holding.history, function( index, histrec ) {	
		console.log(histrec);
		content.push(histrec);
	});
	
	var historytable = $('#history-table').DataTable( {
	        data: content
	        ,sDom: '<"top"i>rt<"bottom"lp><"clear">' //hide the search box ("f" is not in top or bottom)
	     	,searching: true
		    ,info:false
			,lengthChange:false
		    ,paginate:false
	        ,columns: [
	        	{ data: "id", visible:false },
	        	{ data: "ticker", visible:false },
	        	{ data: "brokerage_id", visible:false },
	            { data: "activity_date" },
	            { data: "activity_type" },
	            { data: "shares" , className: "dt-right",render: function ( data, type, row ) { if(data=='----') return data; else return $.number(data,4); } },
	            { data: "price", className: "dt-right", render: function ( data, type, row ) { if(data=='----') return data; else return '$' +$.number(data,4); } },
	            { data: "shares_sold", className: "dt-right", render: function ( data, type, row ) { if(data=='----') return data; else return $.number(data,2); } },
	            { data: "gain_loss", className: "dt-right", createdCell: function(td, cellData, rowData, row, col) { if(cellData == '----'){}else if(Number(cellData)<0){ $(td).css('color','red'); } else { $(td).css('color','green'); }}, render: function ( data, type, row, meta ) { if(data=='----') return data; else return '$' +$.number(data,2); } },
	            //{ "targets": 9, "width":"140px", "orderable":false, "data":null, render: function ( data, type, row ) { if(row.activity_type == "drip"){ return ""; } else{return "<i class='fa fa-trash-o fa-lg ico-trash' aria-hidden='true'></i>" } } }
	        ]
	        ,order: [[ 2, "asc" ]]
	     	,destroy:true
	     	,initComplete: function(settings,json){
	     		
			    // update modal title
			    /*
			    var yearLinks = "<span class='histyear' onclick='filterhistory(0);'>All</span>"
			    						  
			    var years= "";
			    $.each( historytable.rows().data(), function( key, o ) {
			        if(o.activity_date.substring(0,4) != years ){						        	
			        	if(years != "") yearLinks += " | <span class='histyear' onclick='filterhistory(" + years + ");'>" + years + "</span>"
			        	years = o.activity_date.substring(0,4);
			        }
			    });
			    yearLinks += " | <span class='histyear' onclick='filterhistory(" + years + ");'>" + years + "</span>"
			    
			    $('#holding-history-title').html("Transaction history for " + data.name + " (" + data.ticker + ")<br/>" + yearLinks);
	     		
	     		/*
			 	var filteredData = historytable
		 	    .column( 2 )
		 	    .data()
		 	    .filter( function ( value, index ) {
		 	    	console.log(value.substring(0,4) == yr)
		 	        //return (value.substring(0,4) == yr) ? true : false;
		 	    	return false;
		 	    } );
	     		*/
	     	}
    });	
	
	 
	
	$("#modal-history-title").html( "<h1>" + ticker + "</h1>")
	
	$.mobile.changePage("#modal-history", {
       role: "dialog"  // show #page2 as dialog
       ,transition: "slidedown"
    })
}


function loadPortfolio( id ){
	var p = portfolios[id];
	var o = $("#" + p.name.toLowerCase() + "-summary-content");
	o.empty();
	
	
	$.mobile.navigate( "#" + p.name.toLowerCase() + "-summary" );
	
	$("#btn-" + p.name.toLowerCase() + "-holdings").addClass("ui-btn-active").click();
	

	for (var key in p.holdings) {
		var rec = p.holdings[key];

		console.log(rec)
		
		if(rec.shares_owned > 0){
			var cls_gain_loss = (rec.getGain() >= 0) ? 'gain' : 'loss';
			var current_gain_loss = current_value - (current_shares *cost_basis);
			var totalgain = current_gain_loss + dividend_gain;	
			
			o.append('<div role="main" class="ui-content-stock" onclick="javascript:loadHistory(\'' + rec.ticker + '\');">' +
					 '<table width="100%"><tr><td><span class="grp-hdr">' + rec.ticker + '</span><br/>' +
					 '<span class="grp-subhdr" style="width:50px;">' + rec.company + '</span>' +
					 '</td>' + 
					 '<td align="right" width="150">' + $.number(rec.shares_owned,4) + ' / $' + $.number(rec.getValue(),2) + '<br/>$' + $.number(rec.current_price,2) + '<br/>$' + $.number(cost_basis,2) + '</td>' +
					 '<td align="right" width="100"> <div class="holding-value-' + cls_gain_loss + '">$' + $.number(current_gain_loss,2) + '<br/>$' + $.number(totalgain,2) + '<br/></div></td>' +
					 '</tr></table>' +
				     '</div>')
		}
		continue;
		
		
		var company = "";
		var brokerage = 0;
		var portfolio_id = 0;
		var current_shares = 0;
		var current_price = 0;
		var total_cost = 0;
		var dividend_gain = 0;
		$.each( p.history, function( subindex, histrec ) {	
			if(histrec.ticker != rec) return true; // aka... continue
			company = histrec.company_name;
			if(rec == "MMM") console.log(histrec);
			if(histrec.activity_type == "buy" || histrec.activity_type == "drip"){
				current_shares += histrec.shares - (histrec.shares_sold||0)	
				total_cost += (histrec.shares - (histrec.shares_sold||0) ) * histrec.price
			}
			else if(histrec.activity_type == "dividend" ){
				dividend_gain += histrec.shares * histrec.price;				
			}
			current_price = histrec.current_price;
		});
		
		var current_value = current_shares * current_price;
		var cost = current_shares * cost_basis;
		var cost_basis = total_cost / current_shares;
		var current_gain_loss = current_value - (current_shares *cost_basis);
		var totalgain = current_gain_loss + dividend_gain;		
		var cls_gain_loss = (current_gain_loss >= 0) ? 'gain' : 'loss';
		 
		/*
		activity_date:"2018-02-15"
		activity_type:"buy"
		brokerage_id:1
		current_price:216.05
		gain_loss:94.9456
		portfolio_id:1
		price:171.6399
		shares:19
		shares_sold:4
		ticker:"AAPL"
		*/	

	}
	
	/*
		<div role="main" class="ui-content-stock" >
		<span class='grp-hdr'>AAPL</span><br/>
		<span class='grp-subhdr'>Apple</span><br/>
	</div> 
	<div role="main" class="ui-content-stock"" >
		<span class='grp-hdr'>T</span><br/>
		<span class='grp-subhdr'>AT&T</span><br/>
	</div><!-- /content -->
	<div role="main" class="ui-content-stock" >
		<span class='grp-hdr'>WM</span><br/>
		<span class='grp-subhdr'>Waste Management</span><br/>
	</div><!-- /content -->
	*/
	
}
</script>


</head>

<body>
<!-- Start of first page -->
<div data-role="page" id="foo">

	<div data-role="header">	    
		<h1>Portfolios</h1>
	</div><!-- /header -->

<!--
	<div role="main" class="ui-content ">
		<p>I'm first in the source order so I'm shown as the page.</p>
		<p>View internal page called <a href="#bar">bar</a></p>
		<p>View internal page called <a href="#mypanel">open panel</a></p>
	</div> /content -->

	<div role="main" class="ui-content" style=" background-color:#ffffff; margin:10px; ">
		<div id="all-accounts-pie"></div>
		<span class='grp-hdr'>All Accounts</span><br/>
		<span class='grp-subhdr'>Current Value</span><br/>
		<span id="total-value" class='grp-val'>----</span>
		<hr/>
		<span id="total-realized-gain" class='grp-subhdr'>Total Gains: $----.--</span><br/>
	</div><!-- /content -->



	<div role="main" class="ui-content" style=" background-color:#ffffff; margin:10px; " onclick='javascript:loadPortfolio(1);'>
	    <div id="taxable-ytd-dividend-chart"></div>
		<span class='grp-hdr'>Taxable</span><br/>
		<span class='grp-subhdr'>Current Value</span><br/>
		<span id="taxable-value" class='grp-val'>----</span>
		<hr/>
		<span id="taxable-realized-gain" class='grp-subhdr'>Total Realized Gain: $----.--</span><br/>
		<span id="taxable-total-dividends" class='grp-subhdr'>Total Dividends: $----.--</span><br/>
		<span id="taxable-ytd-dividends" class='grp-subhdr'>Total Dividends PY/YTD: $----.--/$----.--</span><br/>
	</div><!-- /content -->

	<div role="main" class="ui-content" style=" background-color:#ffffff; margin:10px; " onclick='javascript:loadPortfolio(2);'>
	    <div id="retirement-ytd-dividend-chart"></div>
		<span class='grp-hdr'>Retirement</span><br/>
		<span class='grp-subhdr'>Current Value</span><br/>
		<span id="retirement-value" class='grp-val'>----</span>
		<hr/>
		<span id="retirement-realized-gain"class='grp-subhdr'>Total Realized Gain: $----.--</span><br/>
		<span id="retirement-total-dividends" class='grp-subhdr'>Total Dividends: $----.--</span><br/>
		<span id="retirement-ytd-dividends" class='grp-subhdr'>Total Dividends PY/YTD: $----.--/$----.--</span><br/>
	</div><!-- /content -->
	

</div><!-- /page -->

<!-- Start of second page -->
<div data-role="page" id="taxable-summary">

	<div data-role="header" data-theme="a" data-position="fixed">    
	    <a href="javascript:$.mobile.navigate( '#foo' );" class='fa fa-lg fa-arrow-left' aria-hidden='true'></a>
		<h1>Taxable Portfolio</h1>
		<a href="#mypanel" class='fa fa-lg fa-bars' aria-hidden='true'></a>		
	</div><!-- /header -->

	<div data-role="tabs" id="tabs">
	<div data-role="navbar">
	  <div class="ui-grid-b ui-responsive">		
		<div class="ui-block-a">&nbsp;</div>
		<div class="ui-block-b" style="text-align:center;">
		  <div data-role="controlgroup" data-type="horizontal" data-mini="true">
		  <ul>
		    <li><a href="#tab-taxable-holdings" id='btn-taxable-holdings' class="ui-btn-active" data-ajax="false" data-role="button">holdings</a></li>
		    <li><a href="#tab-taxable-dividends" id='btn-taxable-dividends' data-ajax="false" data-role="button">dividends</a></li>
          </ul>			  
		  </div>
		</div>
		<div class="ui-block-c">&nbsp;</div>
      </div>
	</div>	
	
		<div id="tab-taxable-holdings" class="">
			<div id="taxable-summary-content"></div>
		</div>
		<div id="tab-taxable-dividends" class="">


		  <div class="ui-grid-a ui-responsive">		
			<div id='taxable-ytd-chart' class="ui-block-a" style="text-align:center;"> YTD charts</div>
			<div class="ui-block-b" style="text-align:center;"> CY BY MONTH</div>
	      </div>			

		  <div class="ui-grid-solo ui-responsive">		
			<div class="ui-block-a" style="text-align:center;"> monthly details</div>
	      </div>			

		  <div class="ui-grid-a ui-responsive">		
			<div class="ui-block-a" style="text-align:center;"> monthly summary</div>
			<div class="ui-block-b" style="text-align:center;"> sector summary</div>
	      </div>			

		  <div class="ui-grid-solo ui-responsive">		
			<div class="ui-block-a" style="text-align:center;"> sankey</div>
	      </div>			
	      
		</div>
		
	</div>
	
	<div data-role="panel" id="mypanel" data-display="overlay" data-position="right">
	    <!-- panel content goes here -->	    
	</div><!-- /panel -->

	
</div><!-- /page -->



<!-- Start of Third page -->
<div data-role="page" id="retirement-summary">

	<div data-role="header" data-theme="a" data-position="fixed">    
	    <a href="javascript:$.mobile.navigate( '#foo' );" class='fa fa-lg fa-arrow-left' aria-hidden='true'></a>
		<h1>Retirement Accounts</h1>
		<a href="#retirement-panel" class='fa fa-lg fa-bars' aria-hidden='true'></a>		
	</div><!-- /header -->

	<div data-role="tabs" id="tabs">
	<div data-role="navbar">
	  <div class="ui-grid-b ui-responsive">		
		<div class="ui-block-a">&nbsp;</div>
		<div class="ui-block-b" style="text-align:center;">
		  <div data-role="controlgroup" data-type="horizontal" data-mini="true">
		  <ul>
		    <li><a href="#tab-retirement-holdings" id='btn-retirement-holdings' class="ui-btn-active" data-ajax="false" data-role="button">holdings</a></li>
		    <li><a href="#tab-retirement-dividends" id='btn-retirement-holdings' data-ajax="false" data-role="button">dividends</a></li>
          </ul>			  
		  </div>
		</div>
		<div class="ui-block-c">&nbsp;</div>
      </div>
	</div>	
	
		<div id="tab-retirement-holdings" class="">
			<div id="retirement-summary-content"></div>
		</div>
		<div id="tab-retirement-dividends" class="">
			dividends :)
		</div>
		
	</div>
	
	<div data-role="retirement-panel" id="mypanel" data-display="overlay" data-position="right">
	    <!-- panel content goes here -->	    
	</div> 

	


	
	<!-- 
	<div data-role="footer" data-position="fixed">
		<div data-role="navbar">
		<ul>
			<li>			
			<a href="#">
			  <span class="ui-btn-inner">
  			    <div class='fa fa-2x fa-plus-square'></div>
			    <div class="ui-btn-text">Add New Holding</div>
			  </span>
			</a>
			</li>
			<li>			
			<a href="#">
			  <span class="ui-btn-inner">
  			    <div class='fa fa-2x fa-money'></div>
			    <div class="ui-btn-text">Update Prices</div>
			  </span>
			</a>
			</li>
 
		</ul>
		</div> 
	</div>
-->
</div><!-- /page -->


<!--  history modal -->
    <div id="modal-history" data-role="dialog" data-transition="flip">
        <div data-role="header" id="modal-history-title">	
        </div>        
        <div data-role="content" id="modal-history-content">
          <table id="history-table" class="display" style="width:100%">
	        <thead>
	            <tr>
	                <th>id</th>
	                <th>holding id</th>
	                <th>brokerage id</th>
	                <th>date</th>
	                <th>type</th>
	                <th>shares</th>
	                <th>price</th>
	                <th>shares<br/>sold</th>
	                <th>+/-</th>
	                <th></th>
	            </tr>
	        </thead>
	      </table>   
        </div>
        <a href="index.html" data-rel="back" class="ui-btn ui-shadow ui-corner-all ui-btn-a">Close</a>
    </div>
</body>
</html>